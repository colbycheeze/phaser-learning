!function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=Phaser},function(t,e,i){"use strict";i.r(e);var r=i(0),o=i.n(r),s="assets/image",n="assets/sprite",a={LOAD:"LOAD",PLAY:"PLAY",SCORE:"SCORE"},c={BACKGROUND:"background.png",GRASS:"grass-platform.png",ICE:"ice-platform.png",RED:"red.png",STAR:"star.png",BOMB:"bomb.png"},l="dude.png";function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,f(e).call(this,{key:a.LOAD}))}var i,r,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,o.a.Scene),i=e,(r=[{key:"loadImages",value:function(){var t=this;this.load.setPath(s),Object.values(c).forEach(function(e){t.load.image(e,e)})}},{key:"loadSpritesheet",value:function(t,e){var i=this;this.load.setPath(n),t.forEach(function(t){i.load.spritesheet(t,t,e)})}},{key:"createAnimations",value:function(){this.anims.create({key:"player-idle",frames:[{key:l,frame:4}],frameRate:20}),this.anims.create({key:"player-run",frames:this.anims.generateFrameNumbers(l,{start:5,end:8}),frameRate:10,repeat:-1})}},{key:"preload",value:function(){this.loadImages(),this.loadSpritesheet([l],{frameWidth:32,frameHeight:48});var t=this.add.graphics({fillStyle:{color:16777215}}),e=this.game.renderer.width/2,i=this.game.renderer.height/2,r=.8*this.game.renderer.width;this.load.on("progress",function(o){var s=r*o;t.fillRect(e-s/2,i-25,s,50)})}},{key:"create",value:function(){this.createAnimations(),this.scene.start(a.PLAY),this.scene.start(a.SCORE)}}])&&u(i.prototype,r),h&&u(i,h),e}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var O=function(t){function e(){var t,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,r=v(e).call(this,{key:a.PLAY}),t=!r||"object"!==b(r)&&"function"!=typeof r?w(i):r,S(w(w(t)),"dude",void 0),S(w(w(t)),"bombs",void 0),S(w(w(t)),"stars",void 0),S(w(w(t)),"platforms",void 0),S(w(w(t)),"ground",void 0),S(w(w(t)),"particles",void 0),S(w(w(t)),"game",void 0),S(w(w(t)),"keys",void 0),S(w(w(t)),"gameOver",!1),S(w(w(t)),"worldWidth",1280),S(w(w(t)),"worldHeight",960),S(w(w(t)),"restartGame",function(){t.events.emit("restartGame"),t.gameOver=!1,t.physics.world.timeScale=1,t.scene.restart()}),t}var i,r,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,o.a.Scene),i=e,(r=[{key:"createPlatform",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.GRASS,r=this.platforms.create(t,e,i);r.body.setSize(132,30),r.body.setOffset(4,1)}},{key:"createPlatforms",value:function(){this.platforms=this.physics.add.staticGroup(),this.ground=this.add.zone(0,this.worldHeight-10).setSize(this.worldWidth,32),this.physics.world.enable(this.ground),this.ground.body.setAllowGravity(!1),this.ground.body.immovable=!0;for(var t=71;t<this.worldWidth;t+=142)this.add.image(t,this.worldHeight+5,c.GRASS);this.createPlatform(71,this.worldHeight-150),this.createPlatform(271,this.worldHeight-300),this.createPlatform(471,this.worldHeight-450),this.createPlatform(271,this.worldHeight-600),this.createPlatform(71,this.worldHeight-750),this.createPlatform(621,this.worldHeight-150),this.createPlatform(621,this.worldHeight-750),this.createPlatform(this.worldWidth-71,this.worldHeight-150),this.createPlatform(this.worldWidth-71-200,this.worldHeight-300),this.createPlatform(this.worldWidth-71-400,this.worldHeight-450),this.createPlatform(this.worldWidth-71-200,this.worldHeight-600),this.createPlatform(this.worldWidth-71,this.worldHeight-750)}},{key:"createDude",value:function(){this.dude=this.physics.add.sprite(100,this.worldHeight-200,l),this.dude.body.setSize(16,40),this.dude.body.setOffset(8,8),this.dude.setCollideWorldBounds(!0),this.dude.setMaxVelocity(400,400),this.dude.setDrag(1e3,0),this.cameras.main.startFollow(this.dude),this.cameras.main.setDeadzone(200,0)}},{key:"createStars",value:function(){this.stars=this.physics.add.group({key:c.STAR,repeat:11,setXY:{x:12,y:0,stepX:this.worldWidth/11}}),this.stars.children.iterate(function(t){t.setBounceY(o.a.Math.FloatBetween(.4,.8)),t.setVelocityX(o.a.Math.FloatBetween(-20,20)),t.setCollideWorldBounds(!0),t.setDrag(20,0)})}},{key:"createEntities",value:function(){this.physics.world.setBounds(0,0,this.worldWidth,this.worldHeight+32),this.cameras.main.setBounds(0,0,this.worldWidth,this.worldHeight),this.add.image(0,0,c.BACKGROUND).setOrigin(0,0).setScale(2),this.createPlatforms(),this.createDude(),this.createStars(),this.bombs=this.physics.add.group(),this.particles=this.add.particles(c.RED),this.createBomb(),this.createBomb()}},{key:"createBomb",value:function(){var t=this.dude.x<this.worldWidth/2?o.a.Math.Between(this.worldWidth,this.worldHeight):o.a.Math.Between(0,this.worldWidth),e=this.bombs.create(t,16,c.BOMB);e.setBounce(1),e.setCollideWorldBounds(!0),e.setVelocity(o.a.Math.Between(-200,200),20),e.setMaxVelocity(1e3,1e3),e.body.allowGravity=!1,e.setCircle(7),this.particles.createEmitter({speed:100,scale:{start:.5,end:0},blendMode:"ADD",maxParticles:10,lifespan:200}).startFollow(e)}},{key:"createInput",value:function(){var t=o.a.Input.Keyboard.KeyCodes;this.keys=this.input.keyboard.addKeys({left:t.LEFT,right:t.RIGHT,up:t.UP,w:t.W,a:t.A,d:t.D})}},{key:"setupPhysics",value:function(){this.physics.add.collider(this.ground,this.dude),this.physics.add.collider(this.ground,this.stars),this.physics.add.collider(this.ground,this.bombs),this.physics.add.collider(this.dude,this.platforms),this.physics.add.collider(this.stars,this.platforms),this.physics.add.collider(this.bombs,this.platforms),this.physics.add.collider(this.bombs,this.bombs),this.physics.add.overlap(this.dude,this.stars,this.collectStar,null,this),this.physics.add.collider(this.dude,this.bombs,this.hitBomb,null,this)}},{key:"collectStar",value:function(t,e){e.disableBody(!0,!0),this.events.emit("collectStar"),0===this.stars.countActive(!0)&&(this.stars.children.iterate(function(t){t.enableBody(!0,t.x,0,!0,!0)}),this.createBomb())}},{key:"restartGame",value:function(){this.gameOver=!1,this.physics.world.timeScale=1,this.scene.restart()}},{key:"hitBomb",value:function(t){this.gameOver||(this.physics.world.timeScale=4,this.gameOver=!0,t.setTint(16711680),t.anims.play("player-idle"),t.setMaxVelocity(5e3,5e3),this.cameras.main.shake(250,.05,!1),this.time.delayedCall(3e3,this.restartGame))}},{key:"handlePlayerInput",value:function(){if(!this.gameOver){var t=o.a.Input.Keyboard,e=t.JustDown,i=t.JustUp,r=this.dude.body.blocked.down||this.dude.body.touching.down,s=r?600:200;this.keys.left.isDown||this.keys.a.isDown?((i(this.keys.right)||i(this.keys.d))&&this.dude.setVelocityX(this.dude.body.velocity.x/3),this.dude.setAccelerationX(-s),this.dude.setFlipX(!0)):this.keys.right.isDown||this.keys.d.isDown?((i(this.keys.left)||i(this.keys.a))&&this.dude.setVelocityX(this.dude.body.velocity.x/3),this.dude.setAccelerationX(s),this.dude.setFlipX(!1)):this.dude.setAccelerationX(0),(e(this.keys.up)||e(this.keys.w))&&r?(this.dude.setVelocityY(-450),this.dude.setAccelerationY(-500)):(i(this.keys.up)||i(this.keys.w))&&this.dude.setAccelerationY(0),r?0!==this.dude.body.velocity.x?this.dude.anims.play("player-run",!0):this.dude.anims.play("player-idle",!0):(this.dude.anims.stop(),0===this.dude.body.velocity.x?this.dude.setTexture(l,4):this.dude.setTexture(l,6))}}},{key:"updateBombs",value:function(){this.bombs.children.iterate(function(t){t.body.speed<400?(t.setData("slowTime",(t.getData("slowTime")||0)+1),t.getData("slowTime")>100&&(t.body.reset(t.body.x,t.body.y-10),t.setVelocity(t.body.velocity.x+20,o.a.Math.Between(-500,-400)),t.setData("slowTime",0))):t.setData("slowTime",0)})}},{key:"create",value:function(){this.createEntities(),this.setupPhysics(),this.createInput()}},{key:"update",value:function(){this.handlePlayerInput(),this.updateBombs()}}])&&m(i.prototype,r),s&&m(i,s),e}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var B=function(t){function e(){var t,i,r,o,s,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,t=!(r=j(e).call(this,{key:a.SCORE}))||"object"!==k(r)&&"function"!=typeof r?_(i):r,o=_(_(t)),n=0,(s="score")in o?Object.defineProperty(o,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[s]=n,t}var i,r,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,o.a.Scene),i=e,(r=[{key:"createScore",value:function(){this.score=0,this.scoreText=this.add.text(16,16,"score: 0",{fontSize:"32px",fill:"#000"})}},{key:"updateScore",value:function(){this.score+=10,this.scoreText.setText("Score: ".concat(this.score))}},{key:"resetScore",value:function(){this.score=0,this.scoreText.setText("Score: ".concat(this.score))}},{key:"create",value:function(){var t=this.scene.get(a.PLAY);this.createScore(),t.events.on("collectStar",this.updateScore,this),t.events.on("restartGame",this.resetScore,this)}}])&&P(i.prototype,r),s&&P(i,s),e}();new o.a.Game({type:o.a.AUTO,width:800,height:600,physics:{default:"arcade",arcade:{gravity:{y:1e3},debug:!1}},scene:[p,O,B]})}]);
//# sourceMappingURL=main.js.map